#include <EEPROM.h>

#define btnBack 4
#define btnNext 5
#define btnEnter 6
#define led 13
#define rele 12

long int menuLCD;
int back;
int next;
int enter;

unsigned long startMillis = 0;

int revelador = 300;
int pausa     = 300;
int fixador   = 300;
int bleatch   = 300;

//int menu01[9] = {180, 120, 195, 120, 270, 120, 80, 180, 300};
//int menu02[9] = {180, 120, 210, 120, 270, 120, 80, 180, 300};
//int menu03[9] = {180, 120, 225, 120, 270, 120, 80, 180, 300};
//int menu04[9] = {180, 120, 240, 120, 270, 120, 80, 180, 300};
//
//int menu05[9] = {300, 120, 195, 120, 240, 120, 180, 60, 300};
//int menu06[9] = {300, 120, 210, 120, 360, 120, 180, 60, 300};
//int menu07[9] = {300, 120, 225, 120, 600, 120, 180, 60, 300};
//int menu08[9] = {300, 120, 240, 120, 900, 120, 180, 60, 300};
//
//int menu09[9] = {300, 120, 195, 120, 180, 120, 252, 60, 300};
//int menu10[9] = {300, 120, 195, 120, 380, 120, 378, 60, 300};
//
//int menu11[12] = {180, 120, 360, 120, 120, 360, 120, 360, 240, 120, 120, 300};
//int menu12[12] = {180, 120, 378, 120, 120, 378, 120, 360, 240, 120, 120, 300};
//
//int menu13[12] = {300, 120, 369, 138, 360, 138, 360, 240, 120};
//int menu14[9] = {300, 120, 378, 138, 420, 138, 480, 240, 120};
//int menu15[9] = {300, 120, 387, 138, 480, 138, 480, 240, 120};
//
//int menu16[11] = {360, 360, 120, 120, 240, 120, 360, 240, 120, 300, 180};
//int menu17[11] = {360, 498, 120, 180, 360, 180, 480, 480, 120, 300, 180};

//int n1; int n2; int n3; int n4 = int n5 = int n6 = int n7 = int n8 = int n9 = int n10 = int n14 = int n15 = 9;
//int n11 = int n12 = int n13 = 12;
//int n16 = int n17 = 11;  

//String tipo1[] = {"Prelavagem","Lavagem","Revelador","Lavagem","Bleatch","Lavagem","Fixador","Estabilizador","Lavagem Final"};
//String tipo2[] = {"Prelavagem","Lavagem","Revelador","Lavagem","InversÃ£o","2 revelador","Condicionador","Bleatch","Fixador","Lavagem","Lavagem","Lavagem final"};
//String tipo3[] = {"Prelavagem","Lavagem","Revelador","Lavagem","Color developer","Lavagem","Bleatch Fix","Lavagem","Lavagem final"};
//String tipo4[] = {"Prelavagem","First Developer","Lavagem","Reversal","Color Developer","Pre Bletch","Bleatch","Fixer","Lavagem","Lavagem Final","Rinse"};

void setup() {
  Serial.begin(38400);
  Serial.println("Inicio");
  
  pinMode(btnBack,INPUT_PULLUP);
  pinMode(btnNext,INPUT_PULLUP);
  pinMode(btnEnter,INPUT_PULLUP);
  
  pinMode(led, OUTPUT);
  
  menuLCD = back = enter = next = 0;
  menuLCD = 1;

  revelador = EEPROMReadInt(0);
  pausa     = EEPROMReadInt(2);
  fixador   = EEPROMReadInt(4);
  bleatch   = EEPROMReadInt(6);
} // fim do setup

void EEPROMWriteInt(int address, int value) {
  byte two = (value & 0xFF);
  byte one = ((value >> 8) & 0xFF);
  
  EEPROM.update(address, two);
  EEPROM.update(address + 1, one);
}

int EEPROMReadInt(int address) {
  long two = EEPROM.read(address);
  long one = EEPROM.read(address + 1);

  return ((two << 0) & 0xFFFFFF) + ((one << 8) & 0xFFFFFFFF);
}

void liga() { 
  digitalWrite(led, HIGH);
  digitalWrite(rele, HIGH);
}
void desliga() { 
  digitalWrite(led, LOW);
  digitalWrite(rele, LOW);
}

//void contagens(int tempos[], String titulo[], int n){
//  int i;
//  for(i=0;i<n;i++){
//    Serial.print(i);
//    Serial.print("/");
//    Serial.print(n);
//    Serial.print(" ");
//    Serial.print(titulo[i]);
//    Serial.print(" : ");    
//    Serial.println(tempos[i]);
//
//    digitalWrite(led,HIGH);
//    startMillis = millis();
//    while(millis()-startMillis < 1000);
//    digitalWrite(led,LOW);
//    Serial.println("Prima NEXT para continuar");
//    while(digitalRead(btnNext)==1);
//  }
//}
void pb(){
  int i=0;
  Serial.print("PB 1/4 REVELADOR: ");
  Serial.println(revelador);
  liga();
  startMillis = millis();
  while(millis()-startMillis < 1000);
  desliga();
  Serial.println("NEXT: PAUSA");
  while(digitalRead(btnNext)==1);

  Serial.print("PB 2/4 PAUSA: ");
  Serial.println(pausa);
  liga();
  startMillis = millis();
  while(millis()-startMillis < 1000){};
  desliga();
  Serial.println("NEXT: FIXADOR");
  while(digitalRead(btnNext)==1);

  Serial.print("PB 3/4 FIXADOR: ");
  Serial.println(fixador);
  liga();
  startMillis = millis();
  while(millis()-startMillis < 1000){};
  desliga();
  Serial.println("NEXT: BLEATCH");
  while(digitalRead(btnNext)==1);

  Serial.print("4/4 BLEATCH: ");
  Serial.println(bleatch);
  liga();
  startMillis = millis();
  while(millis()-startMillis < 1000){};
  desliga();
  Serial.println("NEXT: TERMINAR");
  while(digitalRead(btnNext)==1);
}


void tipo1(int m[]){
  int i=0;
  Serial.println("1/9 PRE LAVAGEM: ");
  Serial.println(m[i++]);
  liga();
  startMillis = millis();
  while(millis()-startMillis < 1000){};
  desliga();
  Serial.println("NEXT: LAVAGEM");
  while(digitalRead(btnNext)==1);

  Serial.println("2/9 LAVAGEM: ");
  Serial.println(m[i++]);
  liga();
  startMillis = millis();
  while(millis()-startMillis < 1000){};
  desliga();
  Serial.println("NEXT: REVELADOR");
  while(digitalRead(btnNext)==1);

  Serial.println("3/9 REVELADOR: ");
  Serial.println(m[i++]);
  liga();
  startMillis = millis();
  while(millis()-startMillis < 1000){};
  desliga();
  Serial.println("NEXT: LAVAGEM 2");
  while(digitalRead(btnNext)==1);

  Serial.println("4/9 LAVAGEM 2: ");
  Serial.println(m[i++]);
  liga();
  startMillis = millis();
  while(millis()-startMillis < 1000){};
  desliga();
  Serial.println("NEXT: BLEATCH");
  while(digitalRead(btnNext)==1);

  Serial.println("5/9 BLEATCH: ");
  Serial.println(m[i++]);
  liga();
  startMillis = millis();
  while(millis()-startMillis < 1000){};
  desliga();
  Serial.println("NEXT: LAVAGEM");
  while(digitalRead(btnNext)==1);

  Serial.println("6/9 LAVAGEM: ");
  Serial.println(m[i++]);
  liga();
  startMillis = millis();
  while(millis()-startMillis < 1000){};
  desliga();
  Serial.println("NEXT: FIXADOR");
  while(digitalRead(btnNext)==1);
     
  Serial.println("7/9 FIXADOR: ");
  Serial.println(m[i++]);
  liga();
  startMillis = millis();
  while(millis()-startMillis < 1000){};
  desliga();
  Serial.println("NEXT: ESTABILIZADOR");
  while(digitalRead(btnNext)==1);
    
  Serial.println("8/9 ESTABILIZADOR: ");
  Serial.println(m[i++]);
  liga();
  startMillis = millis();
  while(millis()-startMillis < 1000){};
  desliga();
  Serial.println("NEXT: LAVAGEM FINAL");
  while(digitalRead(btnNext)==1);
    
  Serial.println("9/9 LAVAGEM FINAL: ");
  Serial.println(m[i++]);
  liga();
  startMillis = millis();
  while(millis()-startMillis < 1000){};
  desliga();
  Serial.println("NEXT: TERMINAR");
  while(digitalRead(btnNext)==1);
  
}

void tipo2(int m[]){
  int i=0;
  Serial.println("1/12 PRE LAVAGEM: ");
  Serial.println(m[i++]);
  liga();
  startMillis = millis();
  while(millis()-startMillis < 1000){};
  desliga();
  Serial.println("NEXT: LAVAGEM");
  while(digitalRead(btnNext)==1);

  Serial.println("2/12 LAVAGEM: ");
  Serial.println(m[i++]);
  liga();
  startMillis = millis();
  while(millis()-startMillis < 1000){};
  desliga();
  Serial.println("NEXT: REVELADOR");
  while(digitalRead(btnNext)==1);

  Serial.println("3/12 REVELADOR: ");
  Serial.println(m[i++]);
  liga();
  startMillis = millis();
  while(millis()-startMillis < 1000){};
  desliga();
  Serial.println("NEXT: LAVAGEM 2");
  while(digitalRead(btnNext)==1);

  Serial.println("4/12 LAVAGEM 2: ");
  Serial.println(m[i++]);
  liga();
  startMillis = millis();
  while(millis()-startMillis < 1000){};
  desliga();
  Serial.println("NEXT: INVERSAO");
  while(digitalRead(btnNext)==1);

  Serial.println("5/12 INVERSAO: ");
  Serial.println(m[i++]);
  liga();
  startMillis = millis();
  while(millis()-startMillis < 1000){};
  desliga();
  Serial.println("NEXT: REVELADOR");
  while(digitalRead(btnNext)==1);

  Serial.println("6/12 2 REVELADOR: ");
  Serial.println(m[i++]);
  liga();
  startMillis = millis();
  while(millis()-startMillis < 1000){};
  desliga();
  Serial.println("NEXT: CONDICIONADOR");
  while(digitalRead(btnNext)==1);
     
  Serial.println("7/12 CONDICIONADOR: ");
  Serial.println(m[i++]);
  liga();
  startMillis = millis();
  while(millis()-startMillis < 1000){};
  desliga();
  Serial.println("NEXT: BLEATCH");
  while(digitalRead(btnNext)==1);
    
  Serial.println("8/12 BLEATCH: ");
  Serial.println(m[i++]);
  liga();
  startMillis = millis();
  while(millis()-startMillis < 1000){};
  desliga();
  Serial.println("NEXT: FIXADOR");
  while(digitalRead(btnNext)==1);
    
  Serial.println("9/12 FIXADOR: ");
  Serial.println(m[i++]);
  liga();
  startMillis = millis();
  while(millis()-startMillis < 1000){};
  desliga();
  Serial.println("NEXT: LAVAGEM");
  while(digitalRead(btnNext)==1);

  Serial.println("10/12 LAVAGEM: ");
  Serial.println(m[i++]);
  liga();
  startMillis = millis();
  while(millis()-startMillis < 1000){};
  desliga();
  Serial.println("NEXT: LAVAGEM");
  while(digitalRead(btnNext)==1);

  Serial.println("11/12 LAVAGEM: ");
  Serial.println(m[i++]);
  liga();
  startMillis = millis();
  while(millis()-startMillis < 1000){};
  desliga();
  Serial.println("NEXT: LAVAGEM FINAL");
  while(digitalRead(btnNext)==1);

  Serial.println("12/12 LAVAGEM FINAL: ");
  Serial.println(m[i++]);
  liga();
  startMillis = millis();
  while(millis()-startMillis < 1000){};
  desliga();
  Serial.println("NEXT: TERMINAR");
  while(digitalRead(btnNext)==1);
}


void tipo3(int m[]){
  int i=0;
  Serial.println("1/9 PRE LAVAGEM: ");
  Serial.println(m[i++]);
  liga();
  startMillis = millis();
  while(millis()-startMillis < 1000){};
  desliga();
  Serial.println("NEXT: LAVAGEM");
  while(digitalRead(btnNext)==1);

  Serial.println("2/9 LAVAGEM: ");
  Serial.println(m[i++]);
  liga();
  startMillis = millis();
  while(millis()-startMillis < 1000){};
  desliga();
  Serial.println("NEXT: REVELADOR");
  while(digitalRead(btnNext)==1);

  Serial.println("3/9 REVELADOR: ");
  Serial.println(m[i++]);
  liga();
  startMillis = millis();
  while(millis()-startMillis < 1000){};
  desliga();
  Serial.println("NEXT: LAVAGEM");
  while(digitalRead(btnNext)==1);

  Serial.println("4/9 LAVAGEM: ");
  Serial.println(m[i++]);
  liga();
  startMillis = millis();
  while(millis()-startMillis < 1000){};
  desliga();
  Serial.println("NEXT: COLOR DEV");
  while(digitalRead(btnNext)==1);

  Serial.println("5/9 COLOR DEV: ");
  Serial.println(m[i++]);
  liga();
  startMillis = millis();
  while(millis()-startMillis < 1000){};
  desliga();
  Serial.println("NEXT: LAVAGEM");
  while(digitalRead(btnNext)==1);

  Serial.println("6/9 LAVAGEM: ");
  Serial.println(m[i++]);
  liga();
  startMillis = millis();
  while(millis()-startMillis < 1000){};
  desliga();
  Serial.println("NEXT: FIXADOR");
  while(digitalRead(btnNext)==1);
     
  Serial.println("7/9 FIXADOR: ");
  Serial.println(m[i++]);
  liga();
  startMillis = millis();
  while(millis()-startMillis < 1000){};
  desliga();
  Serial.println("NEXT: ESTABILIZADOR");
  while(digitalRead(btnNext)==1);
    
  Serial.println("8/9 ESTABILIZADOR: ");
  Serial.println(m[i++]);
  liga();
  startMillis = millis();
  while(millis()-startMillis < 1000){};
  desliga();
  Serial.println("NEXT: LAVAGEM");
  while(digitalRead(btnNext)==1);
    
  Serial.println("9/9 LAVAGEM FINAL: ");
  Serial.println(m[i++]);
  liga();
  startMillis = millis();
  while(millis()-startMillis < 1000){};
  desliga();
  Serial.println("NEXT: TERMINAR");
  while(digitalRead(btnNext)==1);
  
}

void tipo4(int m[]){
  int i=0;
  Serial.println("1/11 PRE LAVAGEM: ");
  Serial.println(m[i++]);
  liga();
  startMillis = millis();
  while(millis()-startMillis < 1000){};
  desliga();
  Serial.println("NEXT: FIRST DEV");
  while(digitalRead(btnNext)==1);

  Serial.println("2/11 FIRST DEV: ");
  Serial.println(m[i++]);
  liga();
  startMillis = millis();
  while(millis()-startMillis < 1000){};
  desliga();
  Serial.println("NEXT: LAVAGEM");
  while(digitalRead(btnNext)==1);

  Serial.println("3/11 LAVAGEM: ");
  Serial.println(m[i++]);
  liga();
  startMillis = millis();
  while(millis()-startMillis < 1000){};
  desliga();
  Serial.println("NEXT: REVERSAL");
  while(digitalRead(btnNext)==1);

  Serial.println("4/11 REVERSAL: ");
  Serial.println(m[i++]);
  liga();
  startMillis = millis();
  while(millis()-startMillis < 1000){};
  desliga();
  Serial.println("NEXT: COLOR DEV");
  while(digitalRead(btnNext)==1);

  Serial.println("5/11 COLOR DEV: ");
  Serial.println(m[i++]);
  liga();
  startMillis = millis();
  while(millis()-startMillis < 1000){};
  desliga();
  Serial.println("NEXT: PRE BLEATCH");
  while(digitalRead(btnNext)==1);

  Serial.println("6/11 PRE BLEATCH: ");
  Serial.println(m[i++]);
  liga();
  startMillis = millis();
  while(millis()-startMillis < 1000){};
  desliga();
  Serial.println("NEXT: BLEATCH");
  while(digitalRead(btnNext)==1);
     
  Serial.println("7/11 BLEATCH: ");
  Serial.println(m[i++]);
  liga();
  startMillis = millis();
  while(millis()-startMillis < 1000){};
  desliga();
  Serial.println("NEXT: FIXER");
  while(digitalRead(btnNext)==1);
    
  Serial.println("8/11 FIXER: ");
  Serial.println(m[i++]);
  liga();
  startMillis = millis();
  while(millis()-startMillis < 1000){};
  desliga();
  Serial.println("NEXT: LAVAGEM");
  while(digitalRead(btnNext)==1);
    
  Serial.println("9/11 LAVAGEM: ");
  Serial.println(m[i++]);
  liga();
  startMillis = millis();
  while(millis()-startMillis < 1000){};
  desliga();
  Serial.println("NEXT: LAVAGEM FINAL");
  while(digitalRead(btnNext)==1);

  Serial.println("10/11 LAVAGEM FINAL: ");
  Serial.println(m[i++]);
  liga();
  startMillis = millis();
  while(millis()-startMillis < 1000){};
  desliga();
  Serial.println("NEXT: RINSE");
  while(digitalRead(btnNext)==1);

  Serial.println("11/11 RINSE: ");
  Serial.println(m[i++]);
  liga();
  startMillis = millis();
  while(millis()-startMillis < 1000){};
  desliga();
  Serial.println("NEXT: TERMINAR");
  while(digitalRead(btnNext)==1);
}

/*
###############################################################################################
#####     LOOP     ############################################################################
###############################################################################################
*/

void loop() {
  
  int menu01[9] = {180, 120, 195, 120, 270, 120, 80, 180, 300};
  int menu02[9] = {180, 120, 210, 120, 270, 120, 80, 180, 300};
  int menu03[9] = {180, 120, 225, 120, 270, 120, 80, 180, 300};
  int menu04[9] = {180, 120, 240, 120, 270, 120, 80, 180, 300};
  
  int menu05[9] = {300, 120, 195, 120, 240, 120, 180, 60, 300};
  int menu06[9] = {300, 120, 210, 120, 360, 120, 180, 60, 300};
  int menu07[9] = {300, 120, 225, 120, 600, 120, 180, 60, 300};
  int menu08[9] = {300, 120, 240, 120, 900, 120, 180, 60, 300};
  
  int menu09[9] = {300, 120, 195, 120, 180, 120, 252, 60, 300};
  int menu10[9] = {300, 120, 195, 120, 380, 120, 378, 60, 300};
  
  int menu11[12] = {180, 120, 360, 120, 120, 360, 120, 360, 240, 120, 120, 300};
  int menu12[12] = {180, 120, 378, 120, 120, 378, 120, 360, 240, 120, 120, 300};
  
  int menu13[12] = {300, 120, 369, 138, 360, 138, 360, 240, 120};
  int menu14[9] = {300, 120, 378, 138, 420, 138, 480, 240, 120};
  int menu15[9] = {300, 120, 387, 138, 480, 138, 480, 240, 120};
  
  int menu16[11] = {360, 360, 120, 120, 240, 120, 360, 240, 120, 300, 180};
  int menu17[11] = {360, 498, 120, 180, 360, 180, 480, 480, 120, 300, 180};

//String tipo1[] = {"Prelavagem","Lavagem","Revelador","Lavagem","Bleatch","Lavagem","Fixador","Estabilizador","Lavagem Final"};
//String tipo2[] = {"Prelavagem","Lavagem","Revelador","Lavagem","InversÃ£o","2 revelador","Condicionador","Bleatch","Fixador","Lavagem","Lavagem","Lavagem final"};
//String tipo3[] = {"Prelavagem","Lavagem","Revelador","Lavagem","Color developer","Lavagem","Bleatch Fix","Lavagem","Lavagem final"};
//String tipo4[] = {"Prelavagem","First Developer","Lavagem","Reversal","Color Developer","Pre Bletch","Bleatch","Fixer","Lavagem","Lavagem Final","Rinse"};

while(1){
  
  switch(menuLCD) {

/*
###############################################################################################
#####     NIVEL 1     #########################################################################
###############################################################################################
*/
    case 1: {
      Serial.println("COR");
      while (1){
        if(digitalRead(btnNext)==0){
          delay(20);
          while(digitalRead(btnNext)==0);
          delay(20);
          menuLCD = 2;
          break;
        }
        else if(digitalRead(btnEnter)==0){
          delay(20);
          while(digitalRead(btnEnter)==0);
          delay(20);
          menuLCD = 11;
          break;
        }
        delay(1);
      }
    }
    break;
   
    case 2:{
      Serial.println("PB");
      while (1){
        if(digitalRead(btnNext)==0){
          delay(20);
          while(digitalRead(btnNext)==0);
          delay(20);
          menuLCD = 1;
          break;
        }
        else if(digitalRead(btnEnter)==0){
          delay(20);
          while(digitalRead(btnEnter)==0);
          delay(20);
          menuLCD = 21;
          break;
        }
        delay(1);
      }
    }
    break;

/*
###############################################################################################
#####     NIVEL 2     #########################################################################
###############################################################################################
*/

    case 11: {
      Serial.println("COR.C41");
      while (1){
        if(digitalRead(btnNext)==0){
          delay(20);
          while(digitalRead(btnNext)==0);
          delay(20);
          menuLCD = 12;
          break;
        }
        else if(digitalRead(btnEnter)==0){
          delay(20);
          while(digitalRead(btnEnter)==0);
          delay(20);
          menuLCD = 111;
          break;
        }
        else if(digitalRead(btnBack)==0){
          delay(20);
          while(digitalRead(btnBack)==0);
          delay(20);
          menuLCD = 1;
          break;
        }
        delay(1);
      }
    }
    break;

    case 12: {
      Serial.println("COR.E6");
      while (1){
        if(digitalRead(btnNext)==0){
          delay(20);
          while(digitalRead(btnNext)==0);
          delay(20);
          menuLCD = 11;
          break;
        }
        else if(digitalRead(btnEnter)==0){
          delay(20);
          while(digitalRead(btnEnter)==0);
          delay(20);
          menuLCD = 121;
          break;
        }
        else if(digitalRead(btnBack)==0){
          delay(20);
          while(digitalRead(btnBack)==0);
          delay(20);
          menuLCD = 1;
          break;
        }
        delay(1);
      }
    }
    break;

    case 21: {
      Serial.print("PB/REV = ");
      Serial.println(revelador);
      while (1){
        if(digitalRead(btnNext)==0){
          delay(20);
          while(digitalRead(btnNext)==0);
          delay(20);
          revelador--;
          menuLCD = 21;
          break;
        }
        else if(digitalRead(btnEnter)==0){
          delay(20);
          while(digitalRead(btnEnter)==0);
          delay(20);
          EEPROMWriteInt(0, revelador);
          menuLCD = 22;
          break;
        }
        else if(digitalRead(btnBack)==0){
          delay(20);
          while(digitalRead(btnBack)==0);
          delay(20);
          revelador ++;
          menuLCD = 21;
          break;
        }
        delay(1);
      }
    }
    break;

    case 22: {
      Serial.print("PB/PAUSA=");
      Serial.println(pausa);
      while (1){
        if(digitalRead(btnNext)==0){
          delay(20);
          while(digitalRead(btnNext)==0);
          delay(20);
          pausa--;
          menuLCD = 22;
          break;
        }
        else if(digitalRead(btnEnter)==0){
          delay(20);
          while(digitalRead(btnEnter)==0);
          delay(20);
          EEPROMWriteInt(2,pausa);
          menuLCD = 23;
          break;
        }
        else if(digitalRead(btnBack)==0){
          delay(20);
          while(digitalRead(btnBack)==0);
          delay(20);
          pausa++;
          menuLCD = 22;
          break;
        }
        delay(1);
      }
    }
    break;

    case 23: {
      Serial.print("PB/FIXADOR=");
      Serial.println(fixador);
      while (1){
        if(digitalRead(btnNext)==0){
          delay(20);
          while(digitalRead(btnNext)==0);
          delay(20);
          fixador--;
          menuLCD = 23;
          break;
        }
        else if(digitalRead(btnEnter)==0){
          delay(20);
          while(digitalRead(btnEnter)==0);
          delay(20);
          EEPROMWriteInt(4,fixador);
          menuLCD = 24;
          break;
        }
        else if(digitalRead(btnBack)==0){
          delay(20);
          while(digitalRead(btnBack)==0);
          delay(20);
          fixador++;
          menuLCD = 23;
          break;
        }
        delay(1);
      }
    }
    break;

    case 24: {
      Serial.print("PB/BLEATCH=");
      Serial.println(bleatch);
      while (1){
        if(digitalRead(btnNext)==0){
          delay(20);
          while(digitalRead(btnNext)==0);
          delay(20);
          bleatch--;
          menuLCD = 24;
          break;
        }
        else if(digitalRead(btnEnter)==0){
          delay(20);
          while(digitalRead(btnEnter)==0);
          delay(20);
          EEPROMWriteInt(6,bleatch);
          menuLCD = 25;
          break;
        }
        else if(digitalRead(btnBack)==0){
          delay(20);
          while(digitalRead(btnBack)==0);
          delay(20);
          bleatch++;
          menuLCD = 24;
          break;
        }
        delay(1);
      }
    }
    break;

    case 25: {
      Serial.print("R: ");
      Serial.println(revelador);
      Serial.print("P: ");
      Serial.println(pausa);
      Serial.print("F: ");
      Serial.println(fixador);
      Serial.print("B: ");
      Serial.println(bleatch);
      Serial.println("AvanÃ§ar");
      while (1){
        if(digitalRead(btnNext)==0){
          delay(20);
          while(digitalRead(btnNext)==0);
          delay(20);
          menuLCD = 22;
          break;
        }
        else if(digitalRead(btnEnter)==0){
          delay(20);
          while(digitalRead(btnEnter)==0);
          delay(20);
          pb();
          menuLCD = 2;
          break;
        }
        else if(digitalRead(btnBack)==0){
          delay(20);
          while(digitalRead(btnBack)==0);
          delay(20);
          menuLCD = 21;
          break;
        }
        delay(1);
      }
    }
    break;


/*
###############################################################################################
#####     NIVEL 3     #########################################################################
###############################################################################################
*/

    case 111: {
      Serial.println("COR.C41.BELLINI");
      while (1){
        if(digitalRead(btnNext)==0){
          delay(20);
          while(digitalRead(btnNext)==0);
          delay(20);
          menuLCD = 112;
          break;
        }
        else if(digitalRead(btnEnter)==0){
          delay(20);
          while(digitalRead(btnEnter)==0);
          delay(20);
          menuLCD = 1111;
          break;
        }
        else if(digitalRead(btnBack)==0){
          delay(20);
          while(digitalRead(btnBack)==0);
          delay(20);
          menuLCD = 11;
          break;
        }
        delay(1);
      }
    }
    break;
    case 112: {
      Serial.println("COR.C41:TETENAL");
      while (1){
        if(digitalRead(btnNext)==0){
          delay(20);
          while(digitalRead(btnNext)==0);
          delay(20);
          menuLCD = 113;
          break;
        }
        else if(digitalRead(btnEnter)==0){
          delay(20);
          while(digitalRead(btnEnter)==0);
          delay(20);
          menuLCD = 1121;
          break;
        }
        else if(digitalRead(btnBack)==0){
          delay(20);
          while(digitalRead(btnBack)==0);
          delay(20);
          menuLCD = 11;
          break;
        }
        delay(1);
      }
    }
    break;
    case 113: {
      Serial.println("COR.C41.FUJI");
      while (1){
        if(digitalRead(btnNext)==0){
          delay(20);
          while(digitalRead(btnNext)==0);
          delay(20);
          menuLCD = 111;
          break;
        }
        else if(digitalRead(btnEnter)==0){
          delay(20);
          while(digitalRead(btnEnter)==0);
          delay(20);
          menuLCD = 1131;
          break;
        }
        else if(digitalRead(btnBack)==0){
          delay(20);
          while(digitalRead(btnBack)==0);
          delay(20);
          menuLCD = 11;
          break;
        }
        delay(1);
      }
    }
    break;     
    case 121: {
      Serial.println("COR.E6.BELLINI");
      while (1){
        if(digitalRead(btnNext)==0){
          delay(20);
          while(digitalRead(btnNext)==0);
          delay(20);
          menuLCD = 122;
          break;
        }
        else if(digitalRead(btnEnter)==0){
          delay(20);
          while(digitalRead(btnEnter)==0);
          delay(20);
          menuLCD = 1211;
          break;
        }
        else if(digitalRead(btnBack)==0){
          delay(20);
          while(digitalRead(btnBack)==0);
          delay(20);
          menuLCD = 11;
          break;
        }
        delay(1);
      }
    }
    break;
    case 122: {
      Serial.println("COR.E6.TETENAL");
      while (1){
        if(digitalRead(btnNext)==0){
          delay(20);
          while(digitalRead(btnNext)==0);
          delay(20);
          menuLCD = 123;
          break;
        }
        else if(digitalRead(btnEnter)==0){
          delay(20);
          while(digitalRead(btnEnter)==0);
          delay(20);
          menuLCD = 1221;
          break;
        }
        else if(digitalRead(btnBack)==0){
          delay(20);
          while(digitalRead(btnBack)==0);
          delay(20);
          menuLCD = 11;
          break;
        }
        delay(1);
      }
    }
    break;     
    case 123: {
      Serial.println("COR.E6.FUJI");
      while (1){
        if(digitalRead(btnNext)==0){
          delay(20);
          while(digitalRead(btnNext)==0);
          delay(20);
          menuLCD = 121;
          break;
        }
        else if(digitalRead(btnEnter)==0){
          delay(20);
          while(digitalRead(btnEnter)==0);
          delay(20);
          menuLCD = 1231;
          break;
        }
        else if(digitalRead(btnBack)==0){
          delay(20);
          while(digitalRead(btnBack)==0);
          delay(20);
          menuLCD = 11;
          break;
        }
        delay(1);
      }
    }
    break;

/*
###############################################################################################
#####     NIVEL 4     #########################################################################
###############################################################################################
*/

    case 1111: {
      Serial.println("COR.C41.BELLINI.1-4");
      while (1){
        if(digitalRead(btnNext)==0){
          delay(20);
          while(digitalRead(btnNext)==0);
          delay(20);
          menuLCD = 1112;
          break;
        }
        else if(digitalRead(btnEnter)==0){
          delay(20);
          while(digitalRead(btnEnter)==0);
          delay(20);
          menuLCD = 11111;
          break;
        }
        else if(digitalRead(btnBack)==0){
          delay(20);
          while(digitalRead(btnBack)==0);
          delay(20);
          menuLCD = 111;
          break;
        }
        delay(1);
      }
    }
    break;
    case 1112: {
      Serial.println("COR.C41.BELLINI.5-8");
      while (1){
        if(digitalRead(btnNext)==0){
          delay(20);
          while(digitalRead(btnNext)==0);
          delay(20);
          menuLCD = 1113;
          break;
        }
        else if(digitalRead(btnEnter)==0){
          delay(20);
          while(digitalRead(btnEnter)==0);
          delay(20);
          menuLCD = 11121;
          break;
        }
        else if(digitalRead(btnBack)==0){
          delay(20);
          while(digitalRead(btnBack)==0);
          delay(20);
          menuLCD = 111;
          break;
        }
        delay(1);
      }
    }
    break;
    case 1113: {
      Serial.println("COR.C41.BELLINI.9-12");
      while (1){
        if(digitalRead(btnNext)==0){
          delay(20);
          while(digitalRead(btnNext)==0);
          delay(20);
          menuLCD = 1114;
          break;
        }
        else if(digitalRead(btnEnter)==0){
          delay(20);
          while(digitalRead(btnEnter)==0);
          delay(20);
          menuLCD = 11131;
          break;
        }
        else if(digitalRead(btnBack)==0){
          delay(20);
          while(digitalRead(btnBack)==0);
          delay(20);
          menuLCD = 111;
          break;
        }
        delay(1);
      }
    }
    break;
    case 1114: {
      Serial.println("COR.C41.BELLINI.12-16");
      while (1){
        if(digitalRead(btnNext)==0){
          delay(20);
          while(digitalRead(btnNext)==0);
          delay(20);
          menuLCD = 1111;
          break;
        }
        else if(digitalRead(btnEnter)==0){
          delay(20);
          while(digitalRead(btnEnter)==0);
          delay(20);
          menuLCD = 11141;
          break;
        }
        else if(digitalRead(btnBack)==0){
          delay(20);
          while(digitalRead(btnBack)==0);
          delay(20);
          menuLCD = 111;
          break;
        }
        delay(1);
      }
    }
    break;
    case 1121: {
      Serial.println("COR.C41.TETENAL.1-4");
      while (1){
        if(digitalRead(btnNext)==0){
          delay(20);
          while(digitalRead(btnNext)==0);
          delay(20);
          menuLCD = 1122;
          break;
        }
        else if(digitalRead(btnEnter)==0){
          delay(20);
          while(digitalRead(btnEnter)==0);
          delay(20);
          menuLCD = 11211;
          break;
        }
        else if(digitalRead(btnBack)==0){
          delay(20);
          while(digitalRead(btnBack)==0);
          delay(20);
          menuLCD = 111;
          break;
        }
        delay(1);
      }
    }
    break;
    case 1122: {
      Serial.println("COR.C41.TETENAL.5-8");
      while (1){
        if(digitalRead(btnNext)==0){
          delay(20);
          while(digitalRead(btnNext)==0);
          delay(20);
          menuLCD = 1123;
          break;
        }
        else if(digitalRead(btnEnter)==0){
          delay(20);
          while(digitalRead(btnEnter)==0);
          delay(20);
          menuLCD = 11221;
          break;
        }
        else if(digitalRead(btnBack)==0){
          delay(20);
          while(digitalRead(btnBack)==0);
          delay(20);
          menuLCD = 111;
          break;
        }
        delay(1);
      }
    }
    break;    
    case 1123: {
      Serial.println("COR.C41.TETENAL.9-12");
      while (1){
        if(digitalRead(btnNext)==0){
          delay(20);
          while(digitalRead(btnNext)==0);
          delay(20);
          menuLCD = 1124;
          break;
        }
        else if(digitalRead(btnEnter)==0){
          delay(20);
          while(digitalRead(btnEnter)==0);
          delay(20);
          menuLCD = 11231;
          break;
        }
        else if(digitalRead(btnBack)==0){
          delay(20);
          while(digitalRead(btnBack)==0);
          delay(20);
          menuLCD = 111;
          break;
        }
        delay(1);
      }
    }
    break;    
    case 1124: {
      Serial.println("COR.C41.TETENAL.12-16");
      while (1){
        if(digitalRead(btnNext)==0){
          delay(20);
          while(digitalRead(btnNext)==0);
          delay(20);
          menuLCD = 1121;
          break;
        }
        else if(digitalRead(btnEnter)==0){
          delay(20);
          while(digitalRead(btnEnter)==0);
          delay(20);
          menuLCD = 11241;
          break;
        }
        else if(digitalRead(btnBack)==0){
          delay(20);
          while(digitalRead(btnBack)==0);
          delay(20);
          menuLCD = 111;
          break;
        }
        delay(1);
      }
    }
    break;    
    case 1131: {
      Serial.println("COR.C41.FUJI.5-9");
      while (1){
        if(digitalRead(btnNext)==0){
          delay(20);
          while(digitalRead(btnNext)==0);
          delay(20);
          menuLCD = 1132;
          break;
        }
        else if(digitalRead(btnEnter)==0){
          delay(20);
          while(digitalRead(btnEnter)==0);
          delay(20);
          menuLCD = 11311;
          break;
        }
        else if(digitalRead(btnBack)==0){
          delay(20);
          while(digitalRead(btnBack)==0);
          delay(20);
          menuLCD = 111;
          break;
        }
        delay(1);
      }
    }
    break; 
    case 1132: {
      Serial.println("COR.C41.FUJI.9-16");
      while (1){
        if(digitalRead(btnNext)==0){
          delay(20);
          while(digitalRead(btnNext)==0);
          delay(20);
          menuLCD = 1131;
          break;
        }
        else if(digitalRead(btnEnter)==0){
          delay(20);
          while(digitalRead(btnEnter)==0);
          delay(20);
          menuLCD = 11321;
          break;
        }
        else if(digitalRead(btnBack)==0){
          delay(20);
          while(digitalRead(btnBack)==0);
          delay(20);
          menuLCD = 111;
          break;
        }
        delay(1);
      }
    }
    break; 
    case 1211: {
      Serial.println("COR.E6.BELLINNI.1-4");
      while (1){
        if(digitalRead(btnNext)==0){
          delay(20);
          while(digitalRead(btnNext)==0);
          delay(20);
          menuLCD = 121;
          break;
        }
        else if(digitalRead(btnEnter)==0){
          delay(20);
          while(digitalRead(btnEnter)==0);
          delay(20);
          menuLCD = 1212;
          break;
        }
        else if(digitalRead(btnBack)==0){
          delay(20);
          while(digitalRead(btnBack)==0);
          delay(20);
          menuLCD = 121;
          break;
        }
        delay(1);
      }
    }
    break;
    case 1212: {
      Serial.println("COR.E6.BELLINI.5-8");
      while (1){
        if(digitalRead(btnNext)==0){
          delay(20);
          while(digitalRead(btnNext)==0);
          delay(20);
          menuLCD = 1211;
          break;
        }
        else if(digitalRead(btnEnter)==0){
          delay(20);
          while(digitalRead(btnEnter)==0);
          delay(20);
          menuLCD = 12121;
          break;
        }
        else if(digitalRead(btnBack)==0){
          delay(20);
          while(digitalRead(btnBack)==0);
          delay(20);
          menuLCD = 121;
          break;
        }
        delay(1);
      }
    }
    break;
    case 1221: {
      Serial.println("COR.E6.TETENAL.1-4");
      while (1){
        if(digitalRead(btnNext)==0){
          delay(20);
          while(digitalRead(btnNext)==0);
          delay(20);
          menuLCD = 1222;
          break;
        }
        else if(digitalRead(btnEnter)==0){
          delay(20);
          while(digitalRead(btnEnter)==0);
          delay(20);
          menuLCD = 12211;
          break;
        }
        else if(digitalRead(btnBack)==0){
          delay(20);
          while(digitalRead(btnBack)==0);
          delay(20);
          menuLCD = 121;
          break;
        }
        delay(1);
      }
    }
    break;
    case 1222: {
      Serial.println("COR.E6.TETENAL.5-8");
      while (1){
        if(digitalRead(btnNext)==0){
          delay(20);
          while(digitalRead(btnNext)==0);
          delay(20);
          menuLCD = 1223;
          break;
        }
        else if(digitalRead(btnEnter)==0){
          delay(20);
          while(digitalRead(btnEnter)==0);
          delay(20);
          menuLCD = 12221;
          break;
        }
        else if(digitalRead(btnBack)==0){
          delay(20);
          while(digitalRead(btnBack)==0);
          delay(20);
          menuLCD = 121;
          break;
        }
        delay(1);
      }
    }
    break;
    case 1223: {
      Serial.println("COR.E6.TETENAL.9-12");
      while (1){
        if(digitalRead(btnNext)==0){
          delay(20);
          while(digitalRead(btnNext)==0);
          delay(20);
          menuLCD = 1221;
          break;
        }
        else if(digitalRead(btnEnter)==0){
          delay(20);
          while(digitalRead(btnEnter)==0);
          delay(20);
          menuLCD = 12231;
          break;
        }
        else if(digitalRead(btnBack)==0){
          delay(20);
          while(digitalRead(btnBack)==0);
          delay(20);
          menuLCD = 121;
          break;
        }
        delay(1);
      }
    }
    break;
    case 1231: {
      Serial.println("COR.E6.FUJI.6-9");
      while (1){
        if(digitalRead(btnNext)==0){
          delay(20);
          while(digitalRead(btnNext)==0);
          delay(20);
          menuLCD = 1232;
          break;
        }
        else if(digitalRead(btnEnter)==0){
          delay(20);
          while(digitalRead(btnEnter)==0);
          delay(20);
          menuLCD = 12311;
          break;
        }
        else if(digitalRead(btnBack)==0){
          delay(20);
          while(digitalRead(btnBack)==0);
          delay(20);
          menuLCD = 121;
          break;
        }
        delay(1);
      }
    }
    break;
    case 1232: {
      Serial.println("COR.E6.FUJI.9-18");
      while (1){
        if(digitalRead(btnNext)==0){
          delay(20);
          while(digitalRead(btnNext)==0);
          delay(20);
          menuLCD = 1231;
          break;
        }
        else if(digitalRead(btnEnter)==0){
          delay(20);
          while(digitalRead(btnEnter)==0);
          delay(20);
          menuLCD = 12321;
          break;
        }
        else if(digitalRead(btnBack)==0){
          delay(20);
          while(digitalRead(btnBack)==0);
          delay(20);
          menuLCD = 121;
          break;
        }
        delay(1);
      }
    }
    break;
/*
###############################################################################################
#####     NIVEL 5     #########################################################################
###############################################################################################
*/
    case 11111: {
      Serial.println("Contador 11111");
      Serial.println(menu01[0]);
      tipo1(menu01);
//      contagens(menu01, tipo1, 9);
      menuLCD = 1111;
      break;
    }
    break;

    case 11121: {
      Serial.println("Contador 11121");
      tipo1(menu02);
//      contagens(menu02, tipo1, 9);
      menuLCD = 1111;
      break;
    }
    break;

    case 11131: {
      Serial.println("Contador 11131");
      tipo1(menu03);
//      contagens(menu03, tipo1, 9);
      menuLCD = 1111;
      break;
    }
    break;

    case 11141: {
      Serial.println("Contador 11141");
      tipo1(menu04);
//      contagens(menu04, tipo1, 9);
      menuLCD = 1111;
      break;
    }
    break;



    case 11211: {
      Serial.println("Contador 11211");
      tipo1(menu05);
//      contagens(menu05, tipo1, 9);
      menuLCD = 1121;
      break;
    }
    break;

    case 11221: {
      Serial.println("Contador 11221");
      tipo1(menu06);
//      contagens(menu06, tipo1, 9);
      menuLCD = 1121;
      break;
    }
    break;

    case 11231: {
      Serial.println("Contador 11231");
//      contagens(menu07, tipo1, 9);
      tipo1(menu07);
      menuLCD = 1121;
      break;
    }
    break;

    case 11241: {
      Serial.println("Contador 11241");
      tipo1(menu08);
//      contagens(menu08, tipo1, 9);
      menuLCD = 1121;
      break;
    }
    break;

    case 11311: {
      Serial.println("Contador 11311");
      tipo1(menu09);
//      contagens(menu09, tipo1, 9);
      menuLCD = 1131;
      break;
    }
    break;

    case 11321: {
      Serial.println("Contador 11321");
      tipo1(menu10);
//      contagens(menu10, tipo1, 9);
      menuLCD = 1131;
      break;
    }
    break;

////////////////////////////
///////////////////////////////
    case 12111: {
      Serial.println("Contador 12111");
      tipo1(menu11);
//      contagens(menu11, tipo2, 12);
      menuLCD = 1211;
      break;
    }
    break;

    case 12121: {
      Serial.println("Contador 12121");
      tipo1(menu12);
//      contagens(menu12, tipo2, 12);
      menuLCD = 1211;
      break;
    }
    break;

    case 12211: {
      Serial.println("Contador 12211");
      tipo1(*menu13);
//      contagens(menu13, tipo3, 9);
      menuLCD = 1221;
      break;
    }
    break;

    case 12221: {
      Serial.println("Contador 12221");
      tipo1(*menu14);
//      contagens(menu14, tipo3, 9);
      menuLCD = 1221;
      break;
    }
    break;

    case 12231: {
      Serial.println("Contador 12231");
      tipo1(*menu15);
//      contagens(menu15, tipo3, 9);
      menuLCD = 1221;
      break;
    }
    break;

    case 12311: {
      Serial.println("Contador 12311");
      tipo1(*menu16);
//      contagens(menu16, tipo4, 11);
      menuLCD = 1231;
      break;
    }
    break;

    case 12321: {
      Serial.println("Contador 12231");
      tipo1(*menu17);
//      contagens(menu17, tipo4, 11);
      menuLCD = 1231;
      break;
    }
    break;










  } // fim do state machine
}
}  // fim do loop
